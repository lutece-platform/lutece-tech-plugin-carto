<#include "managecarto_tabs.html" />
<@tabs2 tab="maptemplate" />


<@box>
	<@boxHeader title='#i18n{carto.modify_maptemplate.title}' />
	<@boxBody>
    <@tform class="form-horizontal" method="post" name="modify_maptemplate" action="jsp/admin/plugins/carto/ManageMapTemplates.jsp" >
			<@messages errors=errors />
			<@input type="hidden" id="id" name="id" value="${maptemplate.id}"/>
			<@input type="hidden" value="${token}" name="token" />
			
			<@formGroup labelFor='title' labelKey='#i18n{carto.modify_maptemplate.labelTitle}' mandatory=true>
				<@input type='text' id='title' name='title'  maxlength=255 value='${maptemplate.title!\'\'}' tabIndex='0' />
			</@formGroup>
			<@formGroup labelFor='description' labelKey='#i18n{carto.modify_maptemplate.labelDescription}' mandatory=true>
				<@input type='text' id='description' name='description'  value='${maptemplate.description!\'\'}' tabIndex='1' />
			</@formGroup>
			<@formGroup labelFor='map_background' labelKey='#i18n{carto.modify_maptemplate.labelMapBackground}' mandatory=true>
				<@select name='map_background' items=mapprovider_list id='map_background' default_value='${maptemplate.mapBackground!\'\'}' />
			</@formGroup>
			<@formGroup labelFor='default_zoom' labelKey='#i18n{carto.modify_maptemplate.labelDefaultZoom}' mandatory=true>
				<@input type='text' id='default_zoom' name='default_zoom'  value='${maptemplate.defaultZoom!\'\'}' tabIndex='3' />
			</@formGroup>
			<@formGroup labelFor='zoom_min' labelKey='#i18n{carto.modify_maptemplate.labelZoomMin}' mandatory=true>
				<@input type='text' id='zoom_min' name='zoom_min'  value='${maptemplate.zoomMin!\'\'}' tabIndex='4' />
			</@formGroup>
			<@formGroup labelFor='zoom_max' labelKey='#i18n{carto.modify_maptemplate.labelZoomMax}' mandatory=true>
				<@input type='text' id='zoom_max' name='zoom_max'  value='${maptemplate.zoomMax!\'\'}' tabIndex='5' />
			</@formGroup>
			<@formGroup labelFor='center_map' labelKey='#i18n{carto.modify_maptemplate.labelCenterMap}' mandatory=true>
				<@input type='text' id='center_map' name='center_map'  maxlength=255 value='${maptemplate.centerMap!\'\'}' tabIndex='6' />
			</@formGroup>
        <@actionButtons button1Name="action_modifyMapTemplate" button2Name="view_manageMapTemplate"/>
    </@tform>
	</@boxBody>
</@box>


<script type='text/javascript'>

            var loadresource = document.createElement('link');
            loadresource.setAttribute("rel", "stylesheet");
            loadresource.setAttribute("type", "text/css");
            loadresource.setAttribute("href", "js/plugins/leaflet/leaflet/leaflet.css");
            document.getElementsByTagName("head")[0].appendChild(loadresource);

            loadresource = document.createElement('script');
            loadresource.setAttribute("type", "text/javascript");
            loadresource.setAttribute("src", "js/proj4js-combined.js");
            document.getElementsByTagName("head")[0].appendChild(loadresource);

            loadresource = document.createElement('script');
            loadresource.setAttribute("type", "text/javascript");
            loadresource.setAttribute("src",  "jsp/admin/plugins/address/modules/autocomplete/SetupSuggestPOI.js.jsp");
            loadresource.async = false;
            document.getElementsByTagName("head")[0].appendChild(loadresource);

            loadresource = document.createElement('script');
            loadresource.setAttribute("type", "text/javascript");
            loadresource.setAttribute("src",  "js/plugins/address/modules/autocomplete/jQuery.suggestPOI.js");
            loadresource.async = false;
            document.getElementsByTagName("head")[0].appendChild(loadresource);

            loadresource = document.createElement('script');
            loadresource.setAttribute("type", "text/javascript");
            loadresource.setAttribute("src",   "js/plugins/leaflet/leaflet/leaflet.js" );
            document.getElementsByTagName("head")[0].appendChild(loadresource);

        $(window).load(function() {
        	var jAdresse = $('center_map');
            jAdresse.suggestPOI();

    });

    </script>
